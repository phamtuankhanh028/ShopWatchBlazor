#pragma checksum "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3f03d4f59174c224ef2b7d54bccb9eca56bd2585"
// <auto-generated/>
#pragma warning disable 1591
namespace ShopWatch.Client.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Client.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Client.Services.ProductService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Client.Services.CategoryService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Client.Services.CartService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 17 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Client.Services.EditionService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using ShopWatch.Client.Services.PaymentService;

#line default
#line hidden
#nullable disable
#nullable restore
#line 19 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Blazored.LocalStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 20 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Blazored.Toast;

#line default
#line hidden
#nullable disable
#nullable restore
#line 21 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Blazored.Toast.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 22 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\_Imports.razor"
using Blazored.Typeahead;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/product/{id:int}")]
    public partial class ProductDetails : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "section");
            __builder.AddAttribute(1, "class", "product-details spad");
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "container");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "row");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "col-lg-6 col-md-6");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "class", "product__details__pic");
            __builder.OpenElement(10, "div");
            __builder.AddAttribute(11, "class", "product__details__pic__item");
            __builder.OpenElement(12, "img");
            __builder.AddAttribute(13, "class", "product__details__pic__item--large");
            __builder.AddAttribute(14, "src", 
#nullable restore
#line 15 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                   product.Image

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(15, "alt");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(16, "\r\n            ");
            __builder.OpenElement(17, "div");
            __builder.AddAttribute(18, "class", "col-lg-6 col-md-6");
            __builder.OpenElement(19, "div");
            __builder.AddAttribute(20, "class", "product__details__text");
            __builder.OpenElement(21, "h3");
#nullable restore
#line 22 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
__builder.AddContent(22, product.Title);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(23, "\r\n                    ");
            __builder.AddMarkupContent(24, @"<div class=""product__details__rating""><i class=""fa fa-star""></i>
                        <i class=""fa fa-star""></i>
                        <i class=""fa fa-star""></i>
                        <i class=""fa fa-star""></i>
                        <i class=""fa fa-star-half-o""></i>
                        <span>(18 reviews)</span></div>

                    ");
            __builder.OpenElement(25, "div");
            __builder.AddAttribute(26, "class", "product__details__price");
#nullable restore
#line 34 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                         if (GetSelectedVariant() != null)
                        {
                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 36 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                             if (GetSelectedVariant().OriginalPrice > GetSelectedVariant().Price)
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(27, "h6");
            __builder.AddAttribute(28, "class", "text-muted");
            __builder.AddAttribute(29, "style", " text-decoration: line-through;");
            __builder.AddContent(30, "$");
#nullable restore
#line 38 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
__builder.AddContent(31, $"{GetSelectedVariant().OriginalPrice :C0}");

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 39 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 39 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
__builder.AddContent(32, $"{@GetSelectedVariant().Price :C0}");

#line default
#line hidden
#nullable disable
#nullable restore
#line 39 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                                                     
                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(33, "\r\n                    ");
            __builder.AddMarkupContent(34, @"<p>
                        Mauris blandit aliquet elit, eget tincidunt nibh pulvinar a. Vestibulum ac diam sit amet quam
                        vehicula elementum sed sit amet dui. Sed porttitor lectus nibh. Vestibulum ac diam sit amet
                        quam vehicula elementum sed sit amet dui. Proin eget tortor risus.
                    </p>");
#nullable restore
#line 47 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                     if (product.Variants != null && product.Variants.Count > 1)
                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(35, "div");
            __builder.AddAttribute(36, "class", "form-group");
            __builder.OpenElement(37, "select");
            __builder.AddAttribute(38, "class", "form-control");
            __builder.AddAttribute(39, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 50 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                                                currentEditionId

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(40, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => currentEditionId = __value, currentEditionId));
            __builder.SetUpdatesAttributeName("value");
#nullable restore
#line 51 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                 foreach (var variant in product.Variants)
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(41, "option");
            __builder.AddAttribute(42, "value", 
#nullable restore
#line 53 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                                    variant.EditionId

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 53 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
__builder.AddContent(43, variant.Edition.Name);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 54 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 57 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                    }

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.EditForm>(44);
            __builder.AddAttribute(45, "Model", global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 58 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                     cartItem

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(46, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenElement(47, "div");
                __builder2.AddAttribute(48, "class", "product__details__quantity");
                __builder2.OpenElement(49, "div");
                __builder2.AddAttribute(50, "class", "quantity");
                __builder2.OpenElement(51, "div");
                __builder2.AddAttribute(52, "class", "pro-qty");
                __Blazor.ShopWatch.Client.Pages.ProductDetails.TypeInference.CreateInputNumber_0(__builder2, 53, 54, "quantity", 55, "width: 70px;", 56, 
#nullable restore
#line 62 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                                                            cartItem.Quantity

#line default
#line hidden
#nullable disable
                , 57, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => cartItem.Quantity = __value, cartItem.Quantity)), 58, () => cartItem.Quantity);
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(59, "\r\n                    ");
            __builder.OpenElement(60, "button");
            __builder.AddAttribute(61, "class", "primary-btn");
            __builder.AddAttribute(62, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 67 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
                                                          AddToCart

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(63, "ADD TO CARD");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(64, "\r\n            <div class=\"col-lg-12\"></div>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 78 "C:\Users\Admin\source\repos\ShopWatch\BlazorShopWatch\ShopWatch\Client\Pages\ProductDetails.razor"
       
    private Product product = new Product();

    private int currentEditionId = 1;

    private CartItem cartItem = new CartItem { Quantity = 1 };

    [Parameter]
    public int Id { get; set; }

    protected override async Task OnParametersSetAsync()
    {
        //if (ProductService.Products == null || ProductService.Products.Count == 0)
        // {
        // ProductService.LoadProducts();
        // }

        product = await ProductService.GetProduct(Id);    //Products.FirstOrDefault(p => p.Id == Int32.Parse(Id));
        if (product.Variants.Count > 0)
        {
            currentEditionId = product.Variants[0].EditionId;
        }
    }

    private ProductVariant GetSelectedVariant()
    {
        var variant = product.Variants.FirstOrDefault(v => v.EditionId == currentEditionId);
        return variant;
    }

    private async Task AddToCart()
    {
        /*
        var cart = await LocalStorage.GetItemAsync<List<ProductVariant>>("cart"); // Kiểm tra xem LocalStorage tên cart có List Product nào chưa
            if(cart == null)
            {
            cart = new List<ProductVariant>();
        }
        cart.Add(GetSelectedVariant()); // Thêm product vào cart (cart là list )
        await LocalStorage.SetItemAsync("cart", cart); //LocalStorage nhận cart. Khi chọn addcart đã nhận được list cart

        ToastService.ShowSuccess(product.Title, "Đã thêm vào giỏ:");
        */
        var productVariant = GetSelectedVariant();
        cartItem.EditionId = productVariant.EditionId;
        cartItem.EditName = productVariant.Edition.Name;
        cartItem.Image = product.Image;
        cartItem.Price = productVariant.Price;
        cartItem.ProductId = productVariant.ProductId;
        cartItem.ProductTitle = product.Title;
        await CartService.AddToCart(cartItem);

    }


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IToastService ToastService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILocalStorageService LocalStorage { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ICartService CartService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IProductService ProductService { get; set; }
    }
}
namespace __Blazor.ShopWatch.Client.Pages.ProductDetails
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateInputNumber_0<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, System.Object __arg0, int __seq1, System.Object __arg1, int __seq2, TValue __arg2, int __seq3, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg3, int __seq4, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg4)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputNumber<TValue>>(seq);
        __builder.AddAttribute(__seq0, "id", __arg0);
        __builder.AddAttribute(__seq1, "style", __arg1);
        __builder.AddAttribute(__seq2, "Value", __arg2);
        __builder.AddAttribute(__seq3, "ValueChanged", __arg3);
        __builder.AddAttribute(__seq4, "ValueExpression", __arg4);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
